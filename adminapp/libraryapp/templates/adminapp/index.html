{% extends "adminapp/base_adminapp.html" %}
{% load bootstrap %}
{% block title %}Library{% endblock %}

{% block content %}
<div class="shadow p-3 mb-5 mt-4 bg-white rounded">
    <p>
        <b> Users:</b>
    </p>
    <table class="table table-striped">
        <thead>
        <tr>
            <form method="get">
            <th scope="col"></th>
            <th scope="col">{{ myFilter.form.first_name|bootstrap }}</th>
            <th scope="col">{{ myFilter.form.last_name|bootstrap }}</th>
            <th scope="col">{{ myFilter.form.phone_number|bootstrap }}</th>
            <th scope="col">{{ myFilter.form.is_active|bootstrap}}</th>
            <th scope="col"><button class="btn btn-primary mb-3" type="submit">Find</button>

            <a href="/" class="btn btn-link mb-3">Clear</a></th>
            </form>
        </tr>
        </thead>

        <tbody>

        {% for user in users %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ user.first_name }}</td>
            <td>{{ user.last_name }}</td>
            <td>{{ user.phone_number }}</td>

            {% if user.is_active %}
            <td>Active reader</td>
            {% else %}
            <td>Inactive</td>
            {% endif %}

            <td>
                <a href="/active-books/{{ user.id }}" class="btn btn-primary">Active books</a>


                {% if user.is_active %}
                <a href="/change-user-active/{{ user.id }}" class="btn btn-danger da">Freeze</a>
                {% else %}
                <a href="/change-user-active/{{ user.id }}" class="btn btn-danger da">Make active</a>
                {% endif %}

            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<div class="card" style="width: 18rem;">
    <div class="card-body">
        <h5 class="card-title">Add a user:</h5>
        <h6 class="card-subtitle mb-2 text-muted"><em>(verified data only)</em></h6>
        <form name="create_new_user" id="new_user_form" method="POST" action="create-user/">
            {% csrf_token %}
            <div class="form-group">
                <label for="first_Name">Name</label>
                <input type="text" class="form-control" id="first_Name" name="first_name" required>
            </div>
            <div class="form-group">
                <label for="last_Name">Surname</label>
                <input type="text" class="form-control" id="last_Name" name="last_name" required>
            </div>
            <div class="form-group">
                <label for="Tel">Phone number</label>
                <input type="tel" class="form-control" id="Tel" name="phone_number" required>
                <small id="emailHelp" class="form-text text-muted">Required field</small>
            </div>
            <button type="submit" class="btn btn-primary" value="Save">Add</button>
            <button type="reset" class="btn btn-danger">Cancel</button>
        </form>

    </div>
</div>
{% endblock %}